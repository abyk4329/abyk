# PR: chore(design): consolidate design system, unify tokens/themes, remove legacy CSS

## סיכום

**מטרה**: לאחד ולנקות את מערכת העיצוב תחת `design/` - להסיר CSS מפוזר, לייחד טוקנים, ליישם light/dark themes נקי, ולהסיר CSS Modules שאינם בשימוש.

## מה השתנה

### 1️⃣ איחוד טוקנים (Tokens Unification)

- **הוסרו קבצים מיותרים**: `app/tokens.css`, `app/page.module.css`
- **הועבר**: `app/reset.css` → `design/base/reset.css`
- **מוזגו**: `design/utils/transitions.css` → `design/tokens/animations.css`
- **תוצאה**: 8 טוקנים בלבד ב-`design/tokens/` (colors, typography, spacing, radii, shadows, z-index, animations, layout)

### 2️⃣ תימות (Light/Dark Themes)

- **תוקן**: `design/themes/dark.css` (פורמט + indentation)
- **אומת**: שני קבצי התימות משתמשים **רק במשתנים סמנטיים** (לא צבעים קשיחים)
- **חוזה**: `[data-theme="light"]` / `[data-theme="dark"]`

### 3️⃣ ארגון מחדש של קומפוננטות

**לפני**:

```
design/themes/
  ├── components/
  ├── widgets/
  ├── auth/
  ├── pages/
  ├── sections/
  ├── wealth-code/
  └── layout-*.css
```

**אחרי**:

```
design/
  ├── components/          # קומפוננטות UI כלליות
  │   ├── button.css
  │   ├── theme-toggle.css
  │   ├── cookie-consent.css
  │   ├── layout-*.css
  │   └── ...
  ├── features/            # סטיילים ספציפיים לפיצ'ר
  │   └── wealth-code/
  └── utils/               # כלי עזר גלובליים
```

### 4️⃣ ניקוי CSS Modules

**הוסרו קבצים שאינם בשימוש**:

- `app/page.module.css`
- `app/components/layout/HeaderBar.module.css`
- `app/components/shared/ThemeToggle.module.css`

**תוצאה**: 0 קבצי `.module.css` נותרו בפרויקט (אומת ב-`find`)

### 5️⃣ קוד מת (Dead Code)

- **הועבר**: `design/themes/neumorphic.css` → `design/components/neumorphic.css`
- **מוזג**: `design/themes/components/icon-button.css` → `design/components/button.css`
- **אומת**: אין selectors מיותרים

### 6️⃣ ייבואים (Imports)

- **נקודת כניסה אחת**: `app/globals.css` מייבא רק `design/index.css`
- **עודכן**: `design/index.css` מייבא בסדר נכון (base → tokens → themes → components → features → utils)
- **אומת**: אין ייבואים של `tokens.css` או קבצים ישנים

## אימות (Verification) ✅

```bash
# 1. CSS Modules נותרו: 0
find app -name "*.module.css" | wc -l
# → 0

# 2. צבעים קשיחים בקומפוננטות: 0
grep -r "color:\s*#[0-9a-fA-F]" app/components design/components design/features | wc -l
# → 0

# 3. ייבואי tokens.css ישנים: 0
grep -r "tokens\.css" app lib | wc -l
# → 0

# 4. Build & Lint
pnpm lint && pnpm build
# → ✅ הכל ירוק
```

## מבנה סופי

```text
design/
├── index.css                # נקודת כניסה
├── base/
│   └── reset.css
├── tokens/                  # 8 קבצי טוקנים
│   ├── colors.css
│   ├── typography.css
│   ├── spacing.css
│   ├── radii.css
│   ├── shadows.css
│   ├── z-index.css
│   ├── animations.css
│   └── layout.css
├── themes/
│   ├── light.css           # semantic variables
│   └── dark.css            # semantic variables
├── components/             # 11 קבצים
├── features/
│   └── wealth-code/        # 7 קבצים
└── utils/
    └── helpers.css
```

## קומיטים (7 Total)

1. `chore(design): inventory CSS and propose consolidation map`
2. `chore(design): unify tokens, remove deprecated CSS, merge transitions`
3. `chore(design): fix dark theme formatting and verify semantic vars`
4. `refactor(design): consolidate components under design/components and features`
5. `refactor(styles): remove unused CSS Module files`
6. `chore(design): move neumorphic utilities to components`
7. `docs(design): add design system section to PROJECT_STRUCTURE.md`

## תיעוד

- **תיעוד מפורט**: `docs/DESIGN-SYSTEM-CONSOLIDATION.md`
  - Before/After structure
  - חוזה תימות (theming contract)
  - דוגמאות משתנים
  - פקודות אימות
- **מבנה פרויקט**: `docs/PROJECT_STRUCTURE.md`
  - נוסף סעיף `design/` מעודכן בעברית
  - היררכיית משתנים
  - דוגמאות ייבוא נכון

## השפעה (Impact)

### ✅ יתרונות

- **מקור אמת יחיד**: כל ה-CSS דרך `design/index.css`
- **תימות נקיות**: light/dark ללא צבעים קשיחים
- **ארגון ברור**: tokens → themes → components → features
- **0 CSS Modules**: מבנה אחיד ללא duplications
- **נגישות לתחזוקה**: מבנה מתועד ומאורגן

### 🔒 שמירה על תקינות

- **אין breaking changes**: כל הקומפוננטות פועלות כצפוי
- **Build & Lint**: ירוקים לאחר כל קומיט
- **Routes**: לא נגעו ב-routes או ב-`lib/domain/`
- **RTL**: מוגן בכל המבנה

## רשימת בדיקות (Checklist)

- [x] כל הקומיטים עברו `pnpm lint`
- [x] כל הקומיטים עברו `pnpm build`
- [x] 0 CSS Modules נותרו
- [x] 0 צבעים קשיחים בקומפוננטות
- [x] 0 ייבואים של קבצים ישנים
- [x] תיעוד מלא ב-`docs/`
- [x] חוזה תימות מתועד
- [x] מבנה `design/` מעודכן ב-`PROJECT_STRUCTURE.md`

## Following Up

לאחר merge:

- [ ] אופציונלי: להוסיף Storybook לקומפוננטות
- [ ] אופציונלי: להוסיף visual regression tests
- [ ] שמירה על convention: קומפוננטות חדשות משתמשות רק במשתנים סמנטיים

---

**סה"כ קבצים שהשתנו**: 37  
**קבצים שנוצרו**: 2 (reset.css ב-base/, DESIGN-SYSTEM-CONSOLIDATION.md)  
**קבצים שנמחקו**: 5 (tokens.css, page.module.css, 3 CSS Modules)  
**קבצים שהועברו**: 19 (reorganization)  
**קבצים ששונו**: 11 (imports, merges, formatting)
